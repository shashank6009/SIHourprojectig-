module.exports=[254799,(e,t,r)=>{t.exports=e.x("crypto",()=>require("crypto"))},688947,(e,t,r)=>{t.exports=e.x("stream",()=>require("stream"))},792509,(e,t,r)=>{t.exports=e.x("url",()=>require("url"))},921517,(e,t,r)=>{t.exports=e.x("http",()=>require("http"))},524836,(e,t,r)=>{t.exports=e.x("https",()=>require("https"))},406461,(e,t,r)=>{t.exports=e.x("zlib",()=>require("zlib"))},918622,(e,t,r)=>{t.exports=e.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},556704,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},832319,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},120635,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},324725,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/after-task-async-storage.external.js",()=>require("next/dist/server/app-render/after-task-async-storage.external.js"))},270406,(e,t,r)=>{t.exports=e.x("next/dist/compiled/@opentelemetry/api",()=>require("next/dist/compiled/@opentelemetry/api"))},193695,(e,t,r)=>{t.exports=e.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},961724,(e,t,r)=>{t.exports=e.x("next/dist/compiled/next-server/app-route-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-route-turbo.runtime.prod.js"))},50381,e=>{"use strict";e.s(["trackEvent",()=>a,"trackModelRun",()=>o],50381);var t=e.i(362693),r=e.i(254799);function s(e){return e?(0,r.createHash)("sha256").update(e).digest("hex"):""}function n(e){if(!e)return"";let t=e;return(t=(t=(t=(t=(t=(t=t.replace(/\b[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Z|a-z]{2,}\b/g,"[email]")).replace(/\b\d{3}[-.]?\d{3}[-.]?\d{4}\b/g,"[phone]")).replace(/\b\(\d{3}\)\s*\d{3}[-.]?\d{4}\b/g,"[phone]")).replace(/\b\d{3}\s\d{3}\s\d{4}\b/g,"[phone]")).replace(/\b\d{3}-\d{2}-\d{4}\b/g,"[ssn]")).replace(/\b\d{9}\b/g,"[ssn]")).replace(/\b\d{4}[\s-]?\d{4}[\s-]?\d{4}[\s-]?\d{4}\b/g,"[card]")}async function a(e){try{let{userId:r,event:a,resumeVersionId:o,metadata:i={}}=e,l=s(r),u=function e(t){if(!t||"object"!=typeof t)return{};let r={};for(let[s,a]of Object.entries(t))s.length>50||/password|secret|token|key/i.test(s)||("string"==typeof a?r[s]=n(a).substring(0,500):"number"==typeof a||"boolean"==typeof a?r[s]=a:Array.isArray(a)?r[s]=a.slice(0,10).map(e=>"string"==typeof e?n(e).substring(0,100):e):"object"==typeof a&&null!==a&&(r[s]=e(a)));if(JSON.stringify(r).length>2e3){let e=Object.entries(r).sort((e,t)=>JSON.stringify(t[1]).length-JSON.stringify(e[1]).length),t={},s=0;for(let[r,n]of e){let e=JSON.stringify({[r]:n}).length;s+e<1800&&(t[r]=n,s+=e)}return t}return r}(i),{error:d}=await t.supabaseServer.from("resume_events").insert({user_hash:l,resume_version_id:o||null,event_type:a,metadata:u});d&&console.error("Failed to track event:",d)}catch(e){console.error("Analytics tracking error:",e)}}async function o(e){try{let{userId:r,resumeVersionId:n,provider:a,model:o,promptKey:i,tokensIn:l,tokensOut:u,atsScore:d,missingKeywords:c}=e,p=s(r),{error:m}=await t.supabaseServer.from("resume_model_runs").insert({user_hash:p,resume_version_id:n||null,provider:a,model:o,prompt_key:i,tokens_in:l||0,tokens_out:u||0,ats_score:d||null,missing_keywords:c||0});m&&console.error("Failed to track model run:",m)}catch(e){console.error("Model run tracking error:",e)}}},705919,(e,t,r)=>{},548530,e=>{"use strict";e.s(["handler",()=>T,"patchFetch",()=>S,"routeModule",()=>N,"serverHooks",()=>O,"workAsyncStorage",()=>A,"workUnitAsyncStorage",()=>q],548530);var t=e.i(747909),r=e.i(174017),s=e.i(996250),n=e.i(759756),a=e.i(561916),o=e.i(869741),i=e.i(316795),l=e.i(487718),u=e.i(995169),d=e.i(47587),c=e.i(666012),p=e.i(570101),m=e.i(626937),x=e.i(10372),h=e.i(193695);e.i(52474);var f=e.i(600220);e.s(["GET",()=>k,"PATCH",()=>j,"POST",()=>E],765779);var v=e.i(89171),g=e.i(322632),R=e.i(362693),b=e.i(50381);let y="00000000-0000-0000-0000-000000000000",w=g.z.object({resumeVersionId:g.z.string().uuid(),blockId:g.z.string().optional(),lineRef:g.z.number().optional(),author:g.z.string().min(1).max(100),text:g.z.string().min(1).max(1e3)}),_=g.z.object({id:g.z.string().uuid(),resolved:g.z.boolean()});async function E(e){try{let t=await e.json(),{resumeVersionId:r,blockId:s,lineRef:n,author:a,text:o}=w.parse(t),i=a.trim().substring(0,100),l=o.trim().substring(0,1e3),{data:u,error:d}=await R.supabaseServer.from("resume_versions").select("id").eq("id",r).single();if(d||!u)return v.NextResponse.json({error:"Resume version not found"},{status:404});let{count:c}=await R.supabaseServer.from("resume_comments").select("*",{count:"exact",head:!0}).eq("resume_version_id",r);if(c&&c>=100)return v.NextResponse.json({error:"Comment limit reached (100 comments per version)"},{status:400});let{data:p,error:m}=await R.supabaseServer.from("resume_comments").insert({resume_version_id:r,block_id:s,line_ref:n,author:i,text:l,resolved:!1}).select().single();if(m)throw m;return await (0,b.trackEvent)({userId:y,event:"COMMENT_ADDED",resumeVersionId:r,metadata:{blockId:s,lineRef:n,author:i,textLength:l.length}}),v.NextResponse.json({success:!0,data:p})}catch(e){if(console.error("Create comment error:",e),e instanceof g.z.ZodError)return v.NextResponse.json({error:"Invalid request data",details:e.errors},{status:400});return v.NextResponse.json({error:"Failed to create comment"},{status:500})}}async function k(e){try{let t=new URL(e.url).searchParams.get("resumeVersionId");if(!t)return v.NextResponse.json({error:"resumeVersionId is required"},{status:400});let{data:r,error:s}=await R.supabaseServer.from("resume_comments").select("*").eq("resume_version_id",t).order("created_at",{ascending:!0});if(s)throw s;return v.NextResponse.json({success:!0,data:{comments:r||[]}})}catch(e){return console.error("Fetch comments error:",e),v.NextResponse.json({error:"Failed to fetch comments"},{status:500})}}async function j(e){try{let t=await e.json(),{id:r,resolved:s}=_.parse(t),{data:n,error:a}=await R.supabaseServer.from("resume_comments").update({resolved:s}).eq("id",r).select().single();if(a)throw a;return await (0,b.trackEvent)({userId:y,event:"COMMENT_RESOLVED",resumeVersionId:n.resume_version_id,metadata:{commentId:r,resolved:s,author:n.author}}),v.NextResponse.json({success:!0,data:n})}catch(e){if(console.error("Update comment error:",e),e instanceof g.z.ZodError)return v.NextResponse.json({error:"Invalid request data",details:e.errors},{status:400});return v.NextResponse.json({error:"Failed to update comment"},{status:500})}}var C=e.i(765779);let N=new t.AppRouteRouteModule({definition:{kind:r.RouteKind.APP_ROUTE,page:"/api/feedback/comment/route",pathname:"/api/feedback/comment",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/src/app/api/feedback/comment/route.ts",nextConfigOutput:"",userland:C}),{workAsyncStorage:A,workUnitAsyncStorage:q,serverHooks:O}=N;function S(){return(0,s.patchFetch)({workAsyncStorage:A,workUnitAsyncStorage:q})}async function T(e,t,s){var v;let g="/api/feedback/comment/route";g=g.replace(/\/index$/,"")||"/";let R=await N.prepare(e,t,{srcPage:g,multiZoneDraftMode:!1});if(!R)return t.statusCode=400,t.end("Bad Request"),null==s.waitUntil||s.waitUntil.call(s,Promise.resolve()),null;let{buildId:b,params:y,nextConfig:w,isDraftMode:_,prerenderManifest:E,routerServerContext:k,isOnDemandRevalidate:j,revalidateOnlyGenerated:C,resolvedPathname:A}=R,q=(0,o.normalizeAppPath)(g),O=!!(E.dynamicRoutes[q]||E.routes[A]);if(O&&!_){let e=!!E.routes[A],t=E.dynamicRoutes[q];if(t&&!1===t.fallback&&!e)throw new h.NoFallbackError}let S=null;!O||N.isDev||_||(S="/index"===(S=A)?"/":S);let T=!0===N.isDev||!O,P=O&&!T,I=e.method||"GET",M=(0,a.getTracer)(),H=M.getActiveScopeSpan(),U={params:y,prerenderManifest:E,renderOpts:{experimental:{cacheComponents:!!w.experimental.cacheComponents,authInterrupts:!!w.experimental.authInterrupts},supportsDynamicResponse:T,incrementalCache:(0,n.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:null==(v=w.experimental)?void 0:v.cacheLife,isRevalidate:P,waitUntil:s.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,r,s)=>N.onRequestError(e,t,s,k)},sharedContext:{buildId:b}},z=new i.NodeNextRequest(e),D=new i.NodeNextResponse(t),F=l.NextRequestAdapter.fromNodeNextRequest(z,(0,l.signalFromNodeResponse)(t));try{let o=async r=>N.handle(F,U).finally(()=>{if(!r)return;r.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let s=M.getRootSpanAttributes();if(!s)return;if(s.get("next.span_type")!==u.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${s.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let n=s.get("next.route");if(n){let e=`${I} ${n}`;r.setAttributes({"next.route":n,"http.route":n,"next.span_name":e}),r.updateName(e)}else r.updateName(`${I} ${e.url}`)}),i=async a=>{var i,l;let u=async({previousCacheEntry:r})=>{try{if(!(0,n.getRequestMeta)(e,"minimalMode")&&j&&C&&!r)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let i=await o(a);e.fetchMetrics=U.renderOpts.fetchMetrics;let l=U.renderOpts.pendingWaitUntil;l&&s.waitUntil&&(s.waitUntil(l),l=void 0);let u=U.renderOpts.collectedTags;if(!O)return await (0,c.sendResponse)(z,D,i,U.renderOpts.pendingWaitUntil),null;{let e=await i.blob(),t=(0,p.toNodeOutgoingHttpHeaders)(i.headers);u&&(t[x.NEXT_CACHE_TAGS_HEADER]=u),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let r=void 0!==U.renderOpts.collectedRevalidate&&!(U.renderOpts.collectedRevalidate>=x.INFINITE_CACHE)&&U.renderOpts.collectedRevalidate,s=void 0===U.renderOpts.collectedExpire||U.renderOpts.collectedExpire>=x.INFINITE_CACHE?void 0:U.renderOpts.collectedExpire;return{value:{kind:f.CachedRouteKind.APP_ROUTE,status:i.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:r,expire:s}}}}catch(t){throw(null==r?void 0:r.isStale)&&await N.onRequestError(e,t,{routerKind:"App Router",routePath:g,routeType:"route",revalidateReason:(0,d.getRevalidateReason)({isRevalidate:P,isOnDemandRevalidate:j})},k),t}},h=await N.handleResponse({req:e,nextConfig:w,cacheKey:S,routeKind:r.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:E,isRoutePPREnabled:!1,isOnDemandRevalidate:j,revalidateOnlyGenerated:C,responseGenerator:u,waitUntil:s.waitUntil});if(!O)return null;if((null==h||null==(i=h.value)?void 0:i.kind)!==f.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==h||null==(l=h.value)?void 0:l.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});(0,n.getRequestMeta)(e,"minimalMode")||t.setHeader("x-nextjs-cache",j?"REVALIDATED":h.isMiss?"MISS":h.isStale?"STALE":"HIT"),_&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let v=(0,p.fromNodeOutgoingHttpHeaders)(h.value.headers);return(0,n.getRequestMeta)(e,"minimalMode")&&O||v.delete(x.NEXT_CACHE_TAGS_HEADER),!h.cacheControl||t.getHeader("Cache-Control")||v.get("Cache-Control")||v.set("Cache-Control",(0,m.getCacheControlHeader)(h.cacheControl)),await (0,c.sendResponse)(z,D,new Response(h.value.body,{headers:v,status:h.value.status||200})),null};H?await i(H):await M.withPropagatedContext(e.headers,()=>M.trace(u.BaseServerSpan.handleRequest,{spanName:`${I} ${e.url}`,kind:a.SpanKind.SERVER,attributes:{"http.method":I,"http.target":e.url}},i))}catch(t){if(H||t instanceof h.NoFallbackError||await N.onRequestError(e,t,{routerKind:"App Router",routePath:q,routeType:"route",revalidateReason:(0,d.getRevalidateReason)({isRevalidate:P,isOnDemandRevalidate:j})}),O)throw t;return await (0,c.sendResponse)(z,D,new Response(null,{status:500})),null}}},236145,e=>{e.v(e=>Promise.resolve().then(()=>e(902808)))}];

//# sourceMappingURL=%5Broot-of-the-server%5D__45e49001._.js.map