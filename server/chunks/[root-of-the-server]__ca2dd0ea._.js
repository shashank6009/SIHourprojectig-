module.exports=[918622,(e,r,t)=>{r.exports=e.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},556704,(e,r,t)=>{r.exports=e.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},832319,(e,r,t)=>{r.exports=e.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},120635,(e,r,t)=>{r.exports=e.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},324725,(e,r,t)=>{r.exports=e.x("next/dist/server/app-render/after-task-async-storage.external.js",()=>require("next/dist/server/app-render/after-task-async-storage.external.js"))},270406,(e,r,t)=>{r.exports=e.x("next/dist/compiled/@opentelemetry/api",()=>require("next/dist/compiled/@opentelemetry/api"))},193695,(e,r,t)=>{r.exports=e.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},961724,(e,r,t)=>{r.exports=e.x("next/dist/compiled/next-server/app-route-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-route-turbo.runtime.prod.js"))},778470,(e,r,t)=>{},307473,e=>{"use strict";e.s(["handler",()=>N,"patchFetch",()=>D,"routeModule",()=>P,"serverHooks",()=>C,"workAsyncStorage",()=>S,"workUnitAsyncStorage",()=>b],307473);var r=e.i(747909),t=e.i(174017),o=e.i(996250),n=e.i(759756),a=e.i(561916),s=e.i(869741),i=e.i(316795),l=e.i(487718),d=e.i(995169),p=e.i(47587),c=e.i(666012),u=e.i(570101),m=e.i(626937),f=e.i(10372),g=e.i(193695);e.i(52474);var x=e.i(600220);e.s(["POST",()=>w,"dynamic",()=>R,"maxDuration",()=>y,"runtime",()=>h],376852);var v=e.i(89171);let h="nodejs",R="force-dynamic",y=120;async function w(r){try{console.log("Server: API endpoint called");let t=(await r.formData()).get("file");if(!(t instanceof File))return console.log("Server: No file uploaded"),v.NextResponse.json({error:"No file uploaded"},{status:400});if(console.log("Server: File received:",{name:t.name,size:t.size,type:t.type}),t.size>5242880)return console.log("Server: File too large:",t.size),v.NextResponse.json({error:"File too large. Please upload a file smaller than 5MB."},{status:400});console.log("Server: Processing file:",t.name,"Type:",t.type,"Size:",t.size);let o=await t.arrayBuffer(),n=Buffer.from(o),a=t.type||"",s=(t.name||"").toLowerCase();(!a||"application/octet-stream"===a)&&(s.endsWith(".pdf")?a="application/pdf":s.endsWith(".docx")?a="application/vnd.openxmlformats-officedocument.wordprocessingml.document":s.endsWith(".txt")&&(a="text/plain")),console.log("Server: Detected content type:",a);let i="";if(a.includes("pdf"))try{let r,t;console.log("Server: Parsing PDF...");let o=0;for(;o<3;)try{o++,console.log(`Server: pdf-parse import attempt ${o}...`);let t=await e.A(314443);if(r=t.default||t,"function"!=typeof r)throw Error("pdf-parse is not a function");console.log("Server: pdf-parse module loaded and verified successfully");break}catch(e){if(console.error(`Server: pdf-parse import attempt ${o} failed:`,e),o>=3)throw console.error("Server: All pdf-parse import attempts failed"),Error("PDF parsing library cannot be loaded in this environment - please use text paste option");await new Promise(e=>setTimeout(e,100))}if(!n||0===n.length)throw Error("Empty or invalid PDF buffer");console.log("Server: Buffer size:",n.length,"bytes");try{console.log("Server: Attempting standard PDF parsing..."),t=await r(n,{max:0})}catch(e){console.log("Server: Standard parsing failed, trying alternative approach...");try{t=await r(n)}catch(r){throw console.log("Server: Simple parsing also failed"),e}}if(i=t?.text||"",console.log("Server: PDF parsed successfully, text length:",i.length),!i||0===i.trim().length)throw console.log("Server: PDF parsing succeeded but no text extracted"),Error("No text could be extracted from the PDF - it may contain only images or be corrupted")}catch(r){console.error("Server: PDF parsing error:",r),console.error("Server: Error details:",{name:r instanceof Error?r.name:"Unknown",message:r instanceof Error?r.message:"Unknown error",stack:r instanceof Error?r.stack:"No stack trace"});let e="Failed to process PDF resume: ";return r instanceof Error?r.message.includes("library not available")?e+="PDF processing is temporarily unavailable on the server. ":r.message.includes("Cannot read property")||r.message.includes("undefined")?e+="PDF parsing library error. ":r.message.includes("Invalid PDF")||r.message.includes("corrupted")?e+="Invalid or corrupted PDF file. ":r.message.includes("password")?e+="Password-protected PDF detected. ":r.message.includes("No text could be extracted")?e+="PDF appears to contain only images or no readable text. ":e+=`PDF processing error: ${r.message}. `:e+="Unknown PDF processing error. ",e+="\n\nPlease try:\n• Use the 'Paste Resume Text' option below\n• Convert PDF to Word/TXT format\n• Ensure PDF is not password-protected\n• Use a PDF with selectable text (not scanned images)",v.NextResponse.json({error:e,type:"PDF_PROCESSING_ERROR"},{status:422})}else if(a.includes("wordprocessingml"))try{console.log("Server: Parsing DOCX...");let r=await e.A(221312),t=await r.extractRawText({buffer:n});i=t?.value||"",console.log("Server: DOCX parsed, text length:",i.length)}catch(e){return console.error("Server: DOCX parsing error:",e),v.NextResponse.json({error:"Failed to parse DOCX. The file might be corrupted."},{status:422})}else{if("text/plain"!==a)return console.log("Server: Unsupported file type:",a),v.NextResponse.json({error:`Unsupported file type: ${a||"unknown"}. Please upload PDF, DOCX, or TXT files.`},{status:415});i=n.toString("utf8"),console.log("Server: Text file read, length:",i.length)}if(!i||0===i.trim().length)return console.log("Server: No text extracted from file"),v.NextResponse.json({error:"The file appears to be empty or contains no readable text."},{status:422});return i=i.replace(/\r\n/g,"\n").replace(/\t/g," ").replace(/  +/g," ").trim(),console.log("Server: Returning text, first 200 chars:",i.substring(0,200)),v.NextResponse.json({text:i})}catch(e){return console.error("Server: Unexpected error:",e),console.error("Server: Error stack:",e instanceof Error?e.stack:"No stack trace"),v.NextResponse.json({error:e instanceof Error?e.message:"Server error while processing file"},{status:500})}}var E=e.i(376852);let P=new r.AppRouteRouteModule({definition:{kind:t.RouteKind.APP_ROUTE,page:"/api/parse-resume/route",pathname:"/api/parse-resume",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/src/app/api/parse-resume/route.ts",nextConfigOutput:"",userland:E}),{workAsyncStorage:S,workUnitAsyncStorage:b,serverHooks:C}=P;function D(){return(0,o.patchFetch)({workAsyncStorage:S,workUnitAsyncStorage:b})}async function N(e,r,o){var v;let h="/api/parse-resume/route";h=h.replace(/\/index$/,"")||"/";let R=await P.prepare(e,r,{srcPage:h,multiZoneDraftMode:!1});if(!R)return r.statusCode=400,r.end("Bad Request"),null==o.waitUntil||o.waitUntil.call(o,Promise.resolve()),null;let{buildId:y,params:w,nextConfig:E,isDraftMode:S,prerenderManifest:b,routerServerContext:C,isOnDemandRevalidate:D,revalidateOnlyGenerated:N,resolvedPathname:k}=R,_=(0,s.normalizeAppPath)(h),F=!!(b.dynamicRoutes[_]||b.routes[k]);if(F&&!S){let e=!!b.routes[k],r=b.dynamicRoutes[_];if(r&&!1===r.fallback&&!e)throw new g.NoFallbackError}let j=null;!F||P.isDev||S||(j="/index"===(j=k)?"/":j);let A=!0===P.isDev||!F,T=F&&!A,O=e.method||"GET",U=(0,a.getTracer)(),q=U.getActiveScopeSpan(),I={params:w,prerenderManifest:b,renderOpts:{experimental:{cacheComponents:!!E.experimental.cacheComponents,authInterrupts:!!E.experimental.authInterrupts},supportsDynamicResponse:A,incrementalCache:(0,n.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:null==(v=E.experimental)?void 0:v.cacheLife,isRevalidate:T,waitUntil:o.waitUntil,onClose:e=>{r.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(r,t,o)=>P.onRequestError(e,r,o,C)},sharedContext:{buildId:y}},H=new i.NodeNextRequest(e),M=new i.NodeNextResponse(r),$=l.NextRequestAdapter.fromNodeNextRequest(H,(0,l.signalFromNodeResponse)(r));try{let s=async t=>P.handle($,I).finally(()=>{if(!t)return;t.setAttributes({"http.status_code":r.statusCode,"next.rsc":!1});let o=U.getRootSpanAttributes();if(!o)return;if(o.get("next.span_type")!==d.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${o.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let n=o.get("next.route");if(n){let e=`${O} ${n}`;t.setAttributes({"next.route":n,"http.route":n,"next.span_name":e}),t.updateName(e)}else t.updateName(`${O} ${e.url}`)}),i=async a=>{var i,l;let d=async({previousCacheEntry:t})=>{try{if(!(0,n.getRequestMeta)(e,"minimalMode")&&D&&N&&!t)return r.statusCode=404,r.setHeader("x-nextjs-cache","REVALIDATED"),r.end("This page could not be found"),null;let i=await s(a);e.fetchMetrics=I.renderOpts.fetchMetrics;let l=I.renderOpts.pendingWaitUntil;l&&o.waitUntil&&(o.waitUntil(l),l=void 0);let d=I.renderOpts.collectedTags;if(!F)return await (0,c.sendResponse)(H,M,i,I.renderOpts.pendingWaitUntil),null;{let e=await i.blob(),r=(0,u.toNodeOutgoingHttpHeaders)(i.headers);d&&(r[f.NEXT_CACHE_TAGS_HEADER]=d),!r["content-type"]&&e.type&&(r["content-type"]=e.type);let t=void 0!==I.renderOpts.collectedRevalidate&&!(I.renderOpts.collectedRevalidate>=f.INFINITE_CACHE)&&I.renderOpts.collectedRevalidate,o=void 0===I.renderOpts.collectedExpire||I.renderOpts.collectedExpire>=f.INFINITE_CACHE?void 0:I.renderOpts.collectedExpire;return{value:{kind:x.CachedRouteKind.APP_ROUTE,status:i.status,body:Buffer.from(await e.arrayBuffer()),headers:r},cacheControl:{revalidate:t,expire:o}}}}catch(r){throw(null==t?void 0:t.isStale)&&await P.onRequestError(e,r,{routerKind:"App Router",routePath:h,routeType:"route",revalidateReason:(0,p.getRevalidateReason)({isRevalidate:T,isOnDemandRevalidate:D})},C),r}},g=await P.handleResponse({req:e,nextConfig:E,cacheKey:j,routeKind:t.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:b,isRoutePPREnabled:!1,isOnDemandRevalidate:D,revalidateOnlyGenerated:N,responseGenerator:d,waitUntil:o.waitUntil});if(!F)return null;if((null==g||null==(i=g.value)?void 0:i.kind)!==x.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==g||null==(l=g.value)?void 0:l.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});(0,n.getRequestMeta)(e,"minimalMode")||r.setHeader("x-nextjs-cache",D?"REVALIDATED":g.isMiss?"MISS":g.isStale?"STALE":"HIT"),S&&r.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let v=(0,u.fromNodeOutgoingHttpHeaders)(g.value.headers);return(0,n.getRequestMeta)(e,"minimalMode")&&F||v.delete(f.NEXT_CACHE_TAGS_HEADER),!g.cacheControl||r.getHeader("Cache-Control")||v.get("Cache-Control")||v.set("Cache-Control",(0,m.getCacheControlHeader)(g.cacheControl)),await (0,c.sendResponse)(H,M,new Response(g.value.body,{headers:v,status:g.value.status||200})),null};q?await i(q):await U.withPropagatedContext(e.headers,()=>U.trace(d.BaseServerSpan.handleRequest,{spanName:`${O} ${e.url}`,kind:a.SpanKind.SERVER,attributes:{"http.method":O,"http.target":e.url}},i))}catch(r){if(q||r instanceof g.NoFallbackError||await P.onRequestError(e,r,{routerKind:"App Router",routePath:_,routeType:"route",revalidateReason:(0,p.getRevalidateReason)({isRevalidate:T,isOnDemandRevalidate:D})}),F)throw r;return await (0,c.sendResponse)(H,M,new Response(null,{status:500})),null}}},221312,e=>{e.v(r=>Promise.all(["server/chunks/[root-of-the-server]__7963a75e._.js","server/chunks/node_modules_be9f4449._.js","server/chunks/node_modules_3269153c._.js"].map(r=>e.l(r))).then(()=>r(998879)))},314443,e=>{e.v(r=>Promise.all(["server/chunks/[root-of-the-server]__6fc923b9._.js","server/chunks/node_modules_14c92e13._.js"].map(r=>e.l(r))).then(()=>r(574267)))}];

//# sourceMappingURL=%5Broot-of-the-server%5D__ca2dd0ea._.js.map