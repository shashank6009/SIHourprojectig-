module.exports=[290010,a=>{"use strict";async function b(a,c={}){let{method:d="GET",headers:e={},body:f}=c,g={method:d,headers:{"Content-Type":"application/json",...e}};f&&"GET"!==d&&(g.body=JSON.stringify(f));let h=await fetch(a,g);if(!h.ok)throw Error(`HTTP ${h.status}: ${h.statusText}`);return h.json()}a.s(["http",()=>c]);let c={get:(a,c)=>b(a,{method:"GET",headers:c}),post:(a,c,d)=>b(a,{method:"POST",headers:d,body:c}),put:(a,c,d)=>b(a,{method:"PUT",headers:d,body:c}),delete:(a,c)=>b(a,{method:"DELETE",headers:c})}},683882,a=>{"use strict";a.s(["default",()=>e]);var b=a.i(187924),c=a.i(572131),d=a.i(290010);function e({versionId:a,isMentorMode:e=!1}){let[f,g]=(0,c.useState)([]),[h,i]=(0,c.useState)(!0),[j,k]=(0,c.useState)(""),[l,m]=(0,c.useState)(e?"Mentor":""),[n,o]=(0,c.useState)(""),[p,q]=(0,c.useState)();(0,c.useEffect)(()=>{r()},[a]);let r=async()=>{try{let b=await d.http.get(`/api/feedback/comment?resumeVersionId=${a}`);g(b.data.comments||[])}catch(a){console.error("Failed to fetch comments:",a)}finally{i(!1)}},s=async()=>{if(j.trim()&&l.trim())try{await d.http.post("/api/feedback/comment",{resumeVersionId:a,blockId:n||void 0,lineRef:p,author:l,text:j}),k(""),o(""),q(void 0),r()}catch(a){console.error("Failed to add comment:",a)}},t=async(a,b)=>{try{await d.http.patch("/api/feedback/comment",{id:a,resolved:b}),r()}catch(a){console.error("Failed to update comment:",a)}},u=f.reduce((a,b)=>{let c=b.blockId||"general";return a[c]||(a[c]=[]),a[c].push(b),a},{});return h?(0,b.jsx)("div",{className:"w-80 bg-gray-50 p-4 border-l",children:(0,b.jsxs)("div",{className:"animate-pulse",children:[(0,b.jsx)("div",{className:"h-4 bg-gray-200 rounded mb-2"}),(0,b.jsx)("div",{className:"h-4 bg-gray-200 rounded mb-2"}),(0,b.jsx)("div",{className:"h-4 bg-gray-200 rounded"})]})}):(0,b.jsxs)("div",{className:"w-80 bg-gray-50 p-4 border-l max-h-screen overflow-y-auto",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Comments & Feedback"}),(0,b.jsxs)("div",{className:"mb-6 p-4 bg-white rounded-lg border",children:[(0,b.jsx)("h4",{className:"font-medium mb-3",children:"Add Comment"}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Author"}),(0,b.jsx)("input",{type:"text",value:l,onChange:a=>m(a.target.value),placeholder:"Your name",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Block ID (optional)"}),(0,b.jsx)("input",{type:"text",value:n,onChange:a=>o(a.target.value),placeholder:"block-1",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Line Reference (optional)"}),(0,b.jsx)("input",{type:"number",value:p||"",onChange:a=>q(a.target.value?parseInt(a.target.value):void 0),placeholder:"1",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Comment"}),(0,b.jsx)("textarea",{value:j,onChange:a=>k(a.target.value),placeholder:"Add your feedback...",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,b.jsx)("button",{onClick:s,disabled:!j.trim()||!l.trim(),className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Add Comment"})]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[Object.entries(u).map(([a,c])=>(0,b.jsxs)("div",{className:"bg-white rounded-lg border p-3",children:[(0,b.jsx)("h4",{className:"font-medium text-sm text-gray-600 mb-2",children:"general"===a?"General Comments":`Block: ${a}`}),(0,b.jsx)("div",{className:"space-y-3",children:c.map(a=>(0,b.jsxs)("div",{className:`p-3 rounded-md border-l-4 ${a.resolved?"bg-green-50 border-green-200":"bg-yellow-50 border-yellow-200"}`,children:[(0,b.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,b.jsxs)("div",{className:"text-sm",children:[(0,b.jsx)("span",{className:"font-medium text-gray-800",children:a.author}),(0,b.jsx)("span",{className:"text-gray-500 ml-2",children:new Date(a.createdAt).toLocaleDateString()}),a.lineRef&&(0,b.jsxs)("span",{className:"text-gray-500 ml-2",children:["Line ",a.lineRef]})]}),(0,b.jsx)("button",{onClick:()=>t(a.id,!a.resolved),className:`text-xs px-2 py-1 rounded ${a.resolved?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:a.resolved?"Resolved":"Mark Resolved"})]}),(0,b.jsx)("p",{className:"text-sm text-gray-700",children:a.text})]},a.id))})]},a)),0===f.length&&(0,b.jsxs)("div",{className:"text-center text-gray-500 py-8",children:[(0,b.jsx)("p",{children:"No comments yet."}),(0,b.jsx)("p",{className:"text-sm",children:"Add the first comment above."})]})]})]})}},392423,a=>{"use strict";a.s(["default",()=>h]);var b=a.i(187924),c=a.i(572131),d=a.i(50944),e=a.i(290010),f=a.i(683882);function g(){let[a,g]=(0,c.useState)(!0),[h,i]=(0,c.useState)(null),[j,k]=(0,c.useState)(null),[l,m]=(0,c.useState)(null),n=(0,d.useSearchParams)();(0,c.useEffect)(()=>{let a=n.get("token");if(!a){i("No review token provided"),g(!1);return}o(a)},[n]);let o=async a=>{try{let b=await e.http.get(`/api/feedback/share?token=${a}`);k(b.data.version),m(b.data.version.id)}catch(a){console.error("Token verification failed:",a),i(a.message||"Invalid or expired review link")}finally{g(!1)}};return a?(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Verifying review link..."})]})}):h?(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center max-w-md mx-auto p-6",children:[(0,b.jsx)("div",{className:"text-red-500 text-6xl mb-4",children:"⚠️"}),(0,b.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Review Link Expired"}),(0,b.jsx)("p",{className:"text-gray-600 mb-4",children:h}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Please request a new review link from the resume owner."})]})}):j?(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,b.jsx)("div",{className:"bg-white shadow-sm border-b",children:(0,b.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-4",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:"Mentor Review Mode"}),(0,b.jsxs)("p",{className:"text-sm text-gray-600",children:["Reviewing: ",j.label," • Created: ",new Date(j.created_at).toLocaleDateString()]})]}),(0,b.jsx)("div",{className:"text-sm text-gray-500",children:"Read-only access"})]})})}),(0,b.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:(0,b.jsxs)("div",{className:"flex",children:[(0,b.jsxs)("div",{className:"flex-1 bg-white rounded-lg shadow-md p-6 mr-6",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Resume Content"}),(0,b.jsxs)("div",{className:"space-y-6",children:[j.content?.blocks?.map((a,c)=>(0,b.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,b.jsxs)("h3",{className:"font-semibold text-gray-800 mb-3 capitalize",children:[a.type," - ",a.title]}),a.description&&(0,b.jsx)("p",{className:"text-sm text-gray-600 mb-3 italic",children:a.description}),(0,b.jsx)("div",{className:"space-y-2",children:a.details?.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,b.jsx)("span",{className:"text-gray-400 mt-1",children:"•"}),(0,b.jsx)("span",{className:"text-sm text-gray-700",children:a})]},c))}),(a.startDate||a.endDate)&&(0,b.jsxs)("div",{className:"mt-3 text-xs text-gray-500",children:[a.startDate&&(0,b.jsxs)("span",{children:["From: ",a.startDate]}),a.startDate&&a.endDate&&(0,b.jsx)("span",{children:" • "}),a.endDate&&(0,b.jsxs)("span",{children:["To: ",a.endDate]})]})]},c)),j.content?.tailoredContent&&(0,b.jsxs)("div",{className:"border-t pt-6",children:[(0,b.jsx)("h3",{className:"font-semibold text-gray-800 mb-3",children:"Tailored Content"}),(0,b.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4",children:[(0,b.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,b.jsx)("strong",{children:"ATS Score:"})," ",j.content.tailoredContent.atsScore,"%"]}),j.content.tailoredContent.gapSuggestions?.length>0&&(0,b.jsxs)("div",{className:"mt-3",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-blue-800 mb-2",children:"Gap Suggestions:"}),(0,b.jsx)("ul",{className:"text-sm text-blue-700 space-y-1",children:j.content.tailoredContent.gapSuggestions.map((a,c)=>(0,b.jsxs)("li",{children:["• ",a]},c))})]})]})]})]})]}),l&&(0,b.jsx)(f.default,{versionId:l,isMentorMode:!0})]})})]}):(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,b.jsx)("div",{className:"text-center",children:(0,b.jsx)("p",{className:"text-gray-600",children:"Loading resume..."})})})}function h(){return(0,b.jsx)(c.Suspense,{fallback:(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Loading review page..."})]})}),children:(0,b.jsx)(g,{})})}}];

//# sourceMappingURL=src_7988dbc3._.js.map