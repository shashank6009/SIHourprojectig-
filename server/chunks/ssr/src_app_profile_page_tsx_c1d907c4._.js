module.exports=[170298,a=>{"use strict";a.s(["default",()=>D],170298);var b=a.i(187924),c=a.i(572131),d=a.i(875003),e=a.i(50944),f=a.i(238246),g=a.i(496261),h=a.i(699570),i=a.i(866718),j=a.i(870430),k=a.i(429246),l=a.i(591119),m=a.i(124348),n=a.i(546842),o=a.i(992258),p=a.i(963519),q=a.i(124987),r=a.i(469769),s=a.i(941961),t=a.i(93518),u=a.i(114548),v=a.i(400210),w=a.i(732860),x=a.i(292e3),y=a.i(816201),z=a.i(824569),A=a.i(713513),B=a.i(571987);let C=function(){let{data:a,status:C}=(0,d.useSession)(),D=(0,e.useRouter)(),[E,F]=(0,c.useState)(!1),[G,H]=(0,c.useState)(!1),[I,J]=(0,c.useState)(null),[K,L]=(0,c.useState)(null),[M,N]=(0,c.useState)({firstName:"",lastName:"",email:"",phone:"",address:"",skills:"",workExperience:"",education:"",careerObjective:"",profileImage:""});(0,c.useEffect)(()=>{if("loading"!==C){if(!a)return void D.push("/login");(()=>{try{let b=a?.user?.email||"demo@pmis.gov.in",c=g.ProfileStorage.getProfileForUser(b);if(c){let a={firstName:c.firstName||"",lastName:c.lastName||"",email:c.email||"",phone:c.phone||"",address:c.address||"",skills:c.skills||"",workExperience:c.workExperience||"",education:`${c.course||""} - ${c.university||""}`.trim(),careerObjective:c.careerObjective||"",profileImage:c.profileImage||""};N(a)}else{let b=a.user,c=b?.name||"",d=c.split(" ").filter(a=>a.trim().length>0),e="",f="";0===d.length?(e=b?.email?.split("@")[0]||"User",f=""):1===d.length?(e=d[0],f=""):(e=d[0],f=d.slice(1).join(" "));let g={firstName:e,lastName:f,email:b?.email||"",phone:"",address:"",skills:"",workExperience:"",education:"",careerObjective:"",profileImage:b?.image||""};console.log("Initializing profile with session data:",{originalName:c,nameParts:d,initialData:g}),N(g)}}catch(a){console.error("Failed to load profile data:",a),J("Failed to load profile data")}})()}},[a,C,D]);let O=(a,b)=>{N(c=>({...c,[a]:b}))},P=async()=>{H(!0),J(null),L(null);try{let b=[];if(M.firstName?.trim()||b.push("First Name"),M.email?.trim()||b.push("Email Address"),b.length>0)throw Error(`Please fill in the following required fields: ${b.join(", ")}`);if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(M.email))throw Error("Please enter a valid email address");let c=a?.user?.email||"demo@pmis.gov.in",d={firstName:M.firstName,lastName:M.lastName,email:M.email,phone:M.phone,address:M.address,skills:M.skills,workExperience:M.workExperience,careerObjective:M.careerObjective,profileImage:M.profileImage,dateOfBirth:"",gender:"",nationality:"",city:"",state:"",pincode:"",highestQualification:"",university:"",course:"",graduationYear:"",cgpa:"",currentStatus:"",languages:"",aadhaarNumber:"",bankAccountNumber:"",ifscCode:"",panNumber:"",category:"",preferredInternshipDuration:"",preferredLocation:"",lastUpdated:new Date().toISOString(),userId:c};g.ProfileStorage.saveProfile(d),L("Profile updated successfully!"),F(!1),setTimeout(()=>L(null),3e3)}catch(a){console.error("Failed to save profile:",a),J(a instanceof Error?a.message:"Failed to save profile")}finally{H(!1)}};return"loading"===C?(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-gov-saffron mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Loading profile..."})]})}):a?(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,b.jsxs)("div",{className:"max-w-4xl mx-auto px-4",children:[(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("h1",{className:"text-3xl font-bold text-gov-navy mb-2 flex items-center gap-2",children:[(0,b.jsx)(n.User,{className:"w-8 h-8 text-gov-saffron"}),"Profile Management"]}),(0,b.jsx)("p",{className:"text-gray-600",children:"Manage your personal information and preferences"})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(h.Button,{onClick:()=>{try{let b=a?.user?.email||"demo@pmis.gov.in",c={firstName:M.firstName,lastName:M.lastName,email:M.email,phone:M.phone,address:M.address,skills:M.skills,workExperience:M.workExperience,careerObjective:M.careerObjective,profileImage:M.profileImage,dateOfBirth:"",gender:"",nationality:"",city:"",state:"",pincode:"",highestQualification:"",university:"",course:"",graduationYear:"",cgpa:"",currentStatus:"",languages:"",aadhaarNumber:"",bankAccountNumber:"",ifscCode:"",panNumber:"",category:"",preferredInternshipDuration:"",preferredLocation:"",lastUpdated:new Date().toISOString(),userId:b};g.ProfileStorage.saveProfile(c),console.log("Profile data saved before applying:",c)}catch(a){console.error("Failed to save profile data before applying:",a)}D.push("/internship")},className:"bg-gov-green hover:bg-gov-green/90 text-white",children:[(0,b.jsx)(w.ArrowRight,{className:"w-4 h-4 mr-2"}),"Apply Now"]}),(0,b.jsx)(f.default,{href:"/dashboard",children:(0,b.jsxs)(h.Button,{variant:"outline",children:[(0,b.jsx)(v.ArrowLeft,{className:"w-4 h-4 mr-2"}),"Back to Dashboard"]})})]})]}),K&&(0,b.jsxs)(m.Alert,{className:"mb-6 border-green-200 bg-green-50",children:[(0,b.jsx)(y.CheckCircle,{className:"h-4 w-4 text-green-600"}),(0,b.jsx)(m.AlertDescription,{className:"text-green-800",children:K})]}),I&&(0,b.jsxs)(m.Alert,{variant:"destructive",className:"mb-6",children:[(0,b.jsx)(x.AlertCircle,{className:"h-4 w-4"}),(0,b.jsx)(m.AlertDescription,{children:I})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,b.jsx)("div",{className:"lg:col-span-1",children:(0,b.jsxs)(l.Card,{children:[(0,b.jsx)(l.CardHeader,{children:(0,b.jsxs)(l.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(A.Camera,{className:"w-5 h-5"}),"Profile Picture"]})}),(0,b.jsxs)(l.CardContent,{className:"text-center",children:[(0,b.jsx)("div",{className:"relative w-32 h-32 mx-auto mb-4",children:M.profileImage?(0,b.jsx)(B.default,{src:M.profileImage,alt:"Profile",width:128,height:128,className:"rounded-full object-cover border-4 border-gov-saffron"}):(0,b.jsx)("div",{className:"w-32 h-32 rounded-full bg-gov-saffron flex items-center justify-center text-white text-4xl font-bold",children:M.firstName.charAt(0).toUpperCase()})}),(0,b.jsxs)("p",{className:"text-sm text-gray-600 mb-4",children:[M.firstName," ",M.lastName]}),E&&(0,b.jsxs)(h.Button,{variant:"outline",size:"sm",onClick:()=>{let a=prompt("Enter image URL:");a&&O("profileImage",a)},children:[(0,b.jsx)(z.Edit,{className:"w-4 h-4 mr-2"}),"Change Photo"]})]})]})}),(0,b.jsx)("div",{className:"lg:col-span-2",children:(0,b.jsxs)(l.Card,{children:[(0,b.jsx)(l.CardHeader,{children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(l.CardTitle,{children:"Personal Information"}),(0,b.jsx)(l.CardDescription,{children:"Update your profile details and preferences"})]}),(0,b.jsx)("div",{className:"flex gap-2",children:E?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(h.Button,{variant:"outline",onClick:()=>{try{let a=localStorage.getItem("profile_data");if(a){let b=JSON.parse(a);N(b)}}catch(a){console.error("Failed to reload profile data:",a)}F(!1),J(null)},disabled:G,children:"Cancel"}),(0,b.jsxs)(h.Button,{onClick:P,disabled:G,className:"bg-gov-navy hover:bg-gov-navy/90 text-white",children:[(0,b.jsx)(u.Save,{className:"w-4 h-4 mr-2"}),G?"Saving...":"Save Changes"]})]}):(0,b.jsxs)(h.Button,{onClick:()=>F(!0),className:"bg-gov-saffron hover:bg-gov-saffron/90 text-white",children:[(0,b.jsx)(z.Edit,{className:"w-4 h-4 mr-2"}),"Edit Profile"]})})]})}),(0,b.jsxs)(l.CardContent,{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(j.Label,{htmlFor:"firstName",className:"flex items-center gap-2",children:[(0,b.jsx)(n.User,{className:"w-4 h-4"}),"First Name *"]}),(0,b.jsx)(i.Input,{id:"firstName",value:M.firstName,onChange:a=>O("firstName",a.target.value),disabled:!E,placeholder:"Enter your first name"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(j.Label,{htmlFor:"lastName",className:"flex items-center gap-2",children:[(0,b.jsx)(n.User,{className:"w-4 h-4"}),"Last Name"]}),(0,b.jsx)(i.Input,{id:"lastName",value:M.lastName,onChange:a=>O("lastName",a.target.value),disabled:!E,placeholder:"Enter your last name"})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(j.Label,{htmlFor:"email",className:"flex items-center gap-2",children:[(0,b.jsx)(o.Mail,{className:"w-4 h-4"}),"Email Address *"]}),(0,b.jsx)(i.Input,{id:"email",type:"email",value:M.email,onChange:a=>O("email",a.target.value),disabled:!E,placeholder:"Enter your email address"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(j.Label,{htmlFor:"phone",className:"flex items-center gap-2",children:[(0,b.jsx)(p.Phone,{className:"w-4 h-4"}),"Phone Number"]}),(0,b.jsx)(i.Input,{id:"phone",value:M.phone,onChange:a=>O("phone",a.target.value),disabled:!E,placeholder:"Enter your phone number"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(j.Label,{htmlFor:"address",className:"flex items-center gap-2",children:[(0,b.jsx)(q.MapPin,{className:"w-4 h-4"}),"Address"]}),(0,b.jsx)(k.Textarea,{id:"address",value:M.address,onChange:a=>O("address",a.target.value),disabled:!E,placeholder:"Enter your address",rows:3})]}),(0,b.jsxs)("div",{className:"border-t pt-6",children:[(0,b.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[(0,b.jsx)(s.Briefcase,{className:"w-5 h-5 text-gov-saffron"}),"Professional Information"]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(j.Label,{htmlFor:"skills",className:"flex items-center gap-2",children:[(0,b.jsx)(t.Award,{className:"w-4 h-4"}),"Skills"]}),(0,b.jsx)(k.Textarea,{id:"skills",value:M.skills,onChange:a=>O("skills",a.target.value),disabled:!E,placeholder:"List your skills (e.g., Python, JavaScript, React, etc.)",rows:3})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(j.Label,{htmlFor:"workExperience",className:"flex items-center gap-2",children:[(0,b.jsx)(s.Briefcase,{className:"w-4 h-4"}),"Work Experience"]}),(0,b.jsx)(k.Textarea,{id:"workExperience",value:M.workExperience,onChange:a=>O("workExperience",a.target.value),disabled:!E,placeholder:"Describe your work experience",rows:3})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(j.Label,{htmlFor:"education",className:"flex items-center gap-2",children:[(0,b.jsx)(r.GraduationCap,{className:"w-4 h-4"}),"Education"]}),(0,b.jsx)(k.Textarea,{id:"education",value:M.education,onChange:a=>O("education",a.target.value),disabled:!E,placeholder:"Describe your educational background",rows:3})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(j.Label,{htmlFor:"careerObjective",className:"flex items-center gap-2",children:[(0,b.jsx)(t.Award,{className:"w-4 h-4"}),"Career Objective"]}),(0,b.jsx)(k.Textarea,{id:"careerObjective",value:M.careerObjective,onChange:a=>O("careerObjective",a.target.value),disabled:!E,placeholder:"Describe your career goals and objectives",rows:3})]})]})]})]})]})})]})]})}):(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsxs)(m.Alert,{variant:"destructive",className:"mb-6",children:[(0,b.jsx)(x.AlertCircle,{className:"h-4 w-4"}),(0,b.jsx)(m.AlertDescription,{children:"Please log in to view your profile."})]}),(0,b.jsx)(h.Button,{onClick:()=>D.push("/login"),children:"Go to Login"})]})})};function D(){let[a,d]=(0,c.useState)(!1);return((0,c.useEffect)(()=>{d(!0)},[]),a)?(0,b.jsx)(C,{}):(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-gov-saffron mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Loading..."})]})})}}];

//# sourceMappingURL=src_app_profile_page_tsx_c1d907c4._.js.map