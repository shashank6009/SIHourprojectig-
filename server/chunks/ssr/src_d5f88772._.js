module.exports=[290010,a=>{"use strict";async function b(a,c={}){let{method:d="GET",headers:e={},body:f}=c,g={method:d,headers:{"Content-Type":"application/json",...e}};f&&"GET"!==d&&(g.body=JSON.stringify(f));let h=await fetch(a,g);if(!h.ok)throw Error(`HTTP ${h.status}: ${h.statusText}`);return h.json()}a.s(["http",()=>c]);let c={get:(a,c)=>b(a,{method:"GET",headers:c}),post:(a,c,d)=>b(a,{method:"POST",headers:d,body:c}),put:(a,c,d)=>b(a,{method:"PUT",headers:d,body:c}),delete:(a,c)=>b(a,{method:"DELETE",headers:c})}},331358,a=>{"use strict";a.s(["default",()=>e]);var b=a.i(187924),c=a.i(572131),d=a.i(290010);function e(){let[a,e]=(0,c.useState)({}),[f,g]=(0,c.useState)([]),[h,i]=(0,c.useState)({consents:!1,vault:!1,dsr:!1}),[j,k]=(0,c.useState)({kind:"",data:""}),[l,m]=(0,c.useState)(null);(0,c.useEffect)(()=>{n(),o()},[]);let n=async()=>{i(a=>({...a,consents:!0}));try{e({LLM_PROCESSING:{granted:!1,version:"2025-09-28",region:"IN"},OUTREACH_EMAIL:{granted:!1,version:"2025-09-28",region:"IN"},CALENDAR_EVENTS:{granted:!1,version:"2025-09-28",region:"IN"},OFFSHORE_STORAGE:{granted:!1,version:"2025-09-28",region:"IN"},ANALYTICS:{granted:!1,version:"2025-09-28",region:"IN"}})}catch(a){console.error("Failed to load consents:",a)}finally{i(a=>({...a,consents:!1}))}},o=async()=>{i(a=>({...a,vault:!0}));try{g([{id:"1",kind:"contact",data:{email:"user@example.com",phone:"+1234567890"}},{id:"2",kind:"education_doc",data:{degree:"Bachelor of Science",university:"Example University"}}])}catch(a){console.error("Failed to load vault items:",a)}finally{i(a=>({...a,vault:!1}))}},p=async b=>{try{let c=!a[b]?.granted;console.log(`Toggling consent for ${b} to ${c}`),e(a=>({...a,[b]:{...a[b],granted:c}}))}catch(a){console.error("Failed to update consent:",a),alert("Failed to update consent")}},q=async()=>{if(!j.kind||!j.data)return void alert("Please fill in both kind and data fields");try{console.log("Adding PII data:",j);let a={id:Date.now().toString(),kind:j.kind,data:JSON.parse(j.data)};g(b=>[...b,a]),k({kind:"",data:""})}catch(a){console.error("Failed to add PII data:",a),alert("Failed to add PII data")}},r=async a=>{if(confirm("Are you sure you want to delete this item?"))try{console.log("Deleting vault item:",a),g(b=>b.filter(b=>b.id!==a))}catch(a){console.error("Failed to delete vault item:",a),alert("Failed to delete vault item")}},s=async()=>{i(a=>({...a,dsr:!0}));try{let a=await d.http.post("/api/dsr/export",{});a.data.success?(m({type:"export",status:"done",downloadUrl:a.data.downloadUrl}),alert("Data export completed! Check the download link below.")):alert("Export failed")}catch(a){console.error("Failed to export data:",a),alert("Failed to export data")}finally{i(a=>({...a,dsr:!1}))}},t=async()=>{if(confirm("Are you sure you want to delete ALL your data? This action cannot be undone.")&&confirm("This will permanently delete all your resumes, comments, batches, and personal data. Are you absolutely sure?")){i(a=>({...a,dsr:!0}));try{let a=await d.http.post("/api/dsr/delete",{confirm:!0});a.data.success?(m({type:"delete",status:"done",deletionSummary:a.data.deletionSummary}),alert("Data deletion completed!")):alert("Deletion failed")}catch(a){console.error("Failed to delete data:",a),alert("Failed to delete data")}finally{i(a=>({...a,dsr:!1}))}}};return(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 p-6",children:(0,b.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Privacy Settings"}),(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Consent Management"}),(0,b.jsxs)("p",{className:"text-sm text-gray-600 mb-6",children:["Policy Version: ",process.env.NEXT_PUBLIC_POLICY_VERSION||"2025-09-28"," | Region: ",process.env.NEXT_PUBLIC_PRIVACY_DEFAULT_REGION||"IN"]}),(0,b.jsx)("div",{className:"space-y-4",children:Object.entries(a).map(([a,c])=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-medium",children:a.replace(/_/g," ")}),(0,b.jsxs)("p",{className:"text-sm text-gray-600",children:["Version: ",c.version," | Region: ",c.region]})]}),(0,b.jsx)("button",{onClick:()=>p(a),className:`px-4 py-2 rounded-md font-medium ${c.granted?"bg-green-100 text-green-800 hover:bg-green-200":"bg-gray-100 text-gray-800 hover:bg-gray-200"}`,children:c.granted?"Granted":"Not Granted"})]},a))})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"PII Manager"}),(0,b.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[(0,b.jsx)("h3",{className:"font-medium mb-3",children:"Add Personal Information"}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)("input",{type:"text",placeholder:"Kind (e.g., contact, education_doc)",value:j.kind,onChange:a=>k(b=>({...b,kind:a.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,b.jsx)("textarea",{placeholder:'Data (JSON format, e.g., {"email": "user@example.com"})',value:j.data,onChange:a=>k(b=>({...b,data:a.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3}),(0,b.jsx)("button",{onClick:q,className:"bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700",children:"Add to Vault"})]})]}),(0,b.jsx)("div",{className:"space-y-3",children:f.map(a=>(0,b.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsx)("h3",{className:"font-medium",children:a.kind}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("button",{onClick:()=>{var b;return b=JSON.stringify(a.data,null,2),void(navigator.clipboard.writeText(b),alert("Copied to clipboard!"))},className:"text-blue-600 hover:text-blue-800 text-sm",children:"Copy"}),(0,b.jsx)("button",{onClick:()=>r(a.id),className:"text-red-600 hover:text-red-800 text-sm",children:"Delete"})]})]}),(0,b.jsx)("pre",{className:"text-sm bg-gray-100 p-2 rounded overflow-x-auto",children:JSON.stringify(a.data,null,2)})]},a.id))})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Data Controls"}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,b.jsx)("h3",{className:"font-medium mb-2",children:"Export My Data"}),(0,b.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:"Download a complete copy of all your data including resumes, comments, and personal information."}),(0,b.jsx)("button",{onClick:s,disabled:h.dsr,className:"bg-green-600 text-white py-2 px-4 rounded-md hover:bg-green-700 disabled:opacity-50",children:h.dsr?"Exporting...":"Export My Data"}),l?.type==="export"&&"done"===l.status&&(0,b.jsxs)("div",{className:"mt-3 p-3 bg-green-50 rounded-md",children:[(0,b.jsx)("p",{className:"text-sm text-green-800",children:"Export completed!"}),(0,b.jsx)("a",{href:l.downloadUrl,className:"text-sm text-green-600 hover:underline",target:"_blank",rel:"noopener noreferrer",children:"Download your data"})]})]}),(0,b.jsxs)("div",{className:"p-4 border border-red-200 rounded-lg bg-red-50",children:[(0,b.jsx)("h3",{className:"font-medium mb-2 text-red-800",children:"Delete My Data"}),(0,b.jsxs)("p",{className:"text-sm text-red-600 mb-3",children:[(0,b.jsx)("strong",{children:"Warning:"})," This will permanently delete all your data. This action cannot be undone."]}),(0,b.jsx)("button",{onClick:t,disabled:h.dsr,className:"bg-red-600 text-white py-2 px-4 rounded-md hover:bg-red-700 disabled:opacity-50",children:h.dsr?"Deleting...":"Delete All My Data"}),l?.type==="delete"&&"done"===l.status&&(0,b.jsxs)("div",{className:"mt-3 p-3 bg-red-100 rounded-md",children:[(0,b.jsx)("p",{className:"text-sm text-red-800",children:"Data deletion completed!"}),(0,b.jsxs)("p",{className:"text-xs text-red-600",children:["Deleted: ",Object.entries(l.deletionSummary||{}).map(([a,b])=>`${a}: ${b}`).join(", ")]})]})]})]})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Privacy Policy"}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("p",{className:"text-sm text-gray-600",children:["Current Policy Version: ",(0,b.jsx)("strong",{children:process.env.NEXT_PUBLIC_POLICY_VERSION||"2025-09-28"})]}),(0,b.jsx)("a",{href:`/policy/${process.env.NEXT_PUBLIC_POLICY_VERSION||"2025-09-28"}`,className:"text-blue-600 hover:underline text-sm",target:"_blank",rel:"noopener noreferrer",children:"View Privacy Policy"})]})]})]})})}}];

//# sourceMappingURL=src_d5f88772._.js.map