(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,566523,e=>{"use strict";e.s(["default",()=>P],566523);var s=e.i(843476),t=e.i(271645),a=e.i(846932),n=e.i(88653),i=e.i(657688),r=e.i(515288),o=e.i(487486),l=e.i(346897),c=e.i(475254);let d=(0,c.default)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);var m=e.i(607486);let h=(0,c.default)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);var x=e.i(16715),g=e.i(63209),p=e.i(269638);let u=(0,c.default)("brain",[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]]);var f=e.i(620278),v=e.i(871689);let b=(0,c.default)("lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);var y=e.i(810980),j=e.i(37727);let w=(0,c.default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);var N=e.i(503116),k=e.i(3386),_=e.i(217255),C=e.i(929592),S=e.i(618566),M=e.i(522016),A=e.i(299749);function I(e){return"".concat("pmis-shortlist-").concat(e)}class R{loadAll(){try{let e=window.localStorage.getItem(I(this.userId));if(!e)return{};let s=JSON.parse(e);if("object"!=typeof s||null===s)return{};return s}catch(e){return console.warn("Failed to load tracked internships:",e),{}}}saveAll(e){try{window.localStorage.setItem(I(this.userId),JSON.stringify(e))}catch(e){console.warn("Failed to save tracked internships:",e)}}list(){return Object.values(this.loadAll()).sort((e,s)=>s.updatedAt-e.updatedAt)}get(e){return this.loadAll()[e]}toggleSave(e){if(!e.internshipId||!e.title||!e.organization)return void console.warn("Invalid entry for toggleSave:",e);let s=this.loadAll();if(s[e.internshipId]){delete s[e.internshipId],this.saveAll(s);return}let t={...e,updatedAt:Date.now()};return s[e.internshipId]=t,this.saveAll(s),t}upsert(e){let s=this.loadAll();s[e.internshipId]={...e,updatedAt:Date.now()},this.saveAll(s)}updateStatus(e,s){let t=this.loadAll();t[e]&&(t[e].status=s,t[e].updatedAt=Date.now(),this.saveAll(t))}updateDocuments(e,s){let t=this.loadAll();t[e]&&(t[e].documents={...t[e].documents,...s},t[e].updatedAt=Date.now(),this.saveAll(t))}updateNotes(e,s){let t=this.loadAll();t[e]&&(t[e].notes=s,t[e].updatedAt=Date.now(),this.saveAll(t))}isSaved(e){return!!this.loadAll()[e]}constructor(e){(0,A._)(this,"userId",void 0),this.userId=e||"guest"}}let D=(e,s)=>e&&s?({coursera:"https://www.coursera.org/search?query=".concat(encodeURIComponent(s)),udemy:"https://www.udemy.com/courses/search/?q=".concat(encodeURIComponent(s)),edx:"https://www.edx.org/search?q=".concat(encodeURIComponent(s)),pluralsight:"https://www.pluralsight.com/search?q=".concat(encodeURIComponent(s)),linkedin:"https://www.linkedin.com/learning/search?keywords=".concat(encodeURIComponent(s)),"khan academy":"https://www.khanacademy.org/search?page_search_query=".concat(encodeURIComponent(s)),youtube:"https://www.youtube.com/results?search_query=".concat(encodeURIComponent(s+" tutorial")),freecodecamp:"https://www.freecodecamp.org/learn/",codecademy:"https://www.codecademy.com/catalog/subject/all?query=".concat(encodeURIComponent(s))})[e.toLowerCase()]||"https://www.google.com/search?q=".concat(encodeURIComponent(s+" course "+e)):"#",z=e=>e&&({coursera:"4-6 weeks",udemy:"8-12 hours",edx:"6-8 weeks",pluralsight:"3-5 hours",linkedin:"2-4 hours","khan academy":"2-3 weeks",youtube:"1-2 hours",freecodecamp:"4-8 weeks",codecademy:"3-6 weeks"})[e.toLowerCase()]||"2-4 weeks",L=e=>e?({python:"Master Python programming fundamentals",javascript:"Learn modern JavaScript and ES6+",react:"Build interactive user interfaces","node.js":"Server-side JavaScript development",sql:"Database querying and management","data science":"Analytics and machine learning basics","machine learning":"AI algorithms and implementations","web development":"Full-stack web application development","mobile development":"iOS and Android app development","cloud computing":"AWS, Azure, and GCP fundamentals",cybersecurity:"Security protocols and best practices","digital marketing":"SEO, social media, and analytics","project management":"Agile and Scrum methodologies","ui/ux design":"User experience and interface design"})[e.toLowerCase()]||"Develop expertise in ".concat(e):"Develop your skills",E=e=>e?({google:"/company-logos/google.png",microsoft:"/company-logos/microsoft.png",amazon:"/company-logos/amazon.png",meta:"/company-logos/meta.png",apple:"/company-logos/apple.png",netflix:"/company-logos/netflix.png",uber:"/company-logos/uber.png",airbnb:"/company-logos/airbnb.png"})[e.toLowerCase()]||"https://ui-avatars.com/api/?name=".concat(encodeURIComponent(e),"&background=f3f4f6&color=374151&size=40"):"https://ui-avatars.com/api/?name=Company&background=f3f4f6&color=374151&size=40";function P(){var e,c,A,I,P,q;let{data:T,status:B}=(0,_.useSession)(),O=(0,S.useRouter)(),F=(null==T||null==(e=T.user)?void 0:e.email)||"guest@pmis.gov.in",[U,G]=(0,t.useState)(null);(0,t.useEffect)(()=>{G(new R(F))},[F]);let[H,J]=(0,t.useState)(null),[W,V]=(0,t.useState)(!0),[Y,K]=(0,t.useState)(null),[Q,X]=(0,t.useState)(null),[Z,$]=(0,t.useState)([]),[ee,es]=(0,t.useState)([]),et="success",[,ea]=(0,t.useState)({}),[,en]=(0,t.useState)({}),[ei,er]=(0,t.useState)(null),[eo,el]=(0,t.useState)(!1);(0,t.useEffect)(()=>{(async()=>{try{let s;Object.keys(localStorage).forEach(e=>{e.startsWith("ml_recommendations_")&&(localStorage.removeItem(e),console.log("[RecommendationsPage] Cleared cached recommendations:",e))});let t=sessionStorage.getItem("student_profile");if(!t){K("No student profile found. Please fill the intern form first."),V(!1);return}try{s=JSON.parse(t)}catch(e){K("Invalid profile data. Please fill the intern form again."),V(!1);return}if(!s.student_id){K("Invalid profile: missing student ID. Please fill the intern form again."),V(!1);return}if(!s.skills||0===s.skills.length||!s.stream||void 0===s.cgpa||null===s.cgpa||!s.rural_urban||!s.college_tier)try{var e;let t=sessionStorage.getItem("intern_form_data");if(t&&(null==T||null==(e=T.user)?void 0:e.email)){let e=JSON.parse(t),a=k.MLService.transformInternFormToProfile(e,T.user.email);sessionStorage.setItem("student_profile",JSON.stringify(a)),s=a,console.log("[Recommendations] Rebuilt incomplete profile from form data")}else console.warn("[Recommendations] Could not rebuild profile - missing form data or session")}catch(e){console.error("[Recommendations] Failed to rebuild profile:",e)}X(s),console.log("Fetching AI recommendations for:",s.student_id);let a=await k.MLService.getRecommendations(s,15);if(console.warn("[Recommendations] âš ï¸ ML MODEL ISSUES DETECTED:"),console.warn("  - Model returns random recommendations instead of ranking by success probability"),console.warn("  - Success probabilities are pre-calculated buckets, not student-specific"),console.warn("  - Recommendations will vary on each refresh due to random selection"),!a||!a.recommendations)throw Error("Invalid response from ML service");await k.MLService.storeRecommendations(s.student_id,a);let n=a.recommendations.map(e=>{if(!e.application_deadline){let s=new Date("2025-12-01"),t=Math.floor(31*Math.random()),a=new Date(s);return a.setDate(s.getDate()+t),a.setHours(9+Math.floor(8*Math.random()),Math.floor(60*Math.random()),0,0),console.log("[RecommendationsPage] Generated missing deadline for ".concat(e.title,":"),a.toISOString()),{...e,application_deadline:a.toISOString()}}return e});console.log("[RecommendationsPage] Final deadlines:",n.map(e=>({title:e.title,deadline:e.application_deadline}))),J({...a,recommendations:n}),$(n)}catch(e){console.error("Failed to load recommendations:",e),K(e instanceof Error?e.message:"Failed to load recommendations")}finally{V(!1)}})()},[T]),(0,t.useEffect)(()=>{el(!0),console.log("ðŸš€ Recommendations page mounted - random December 2025 deadlines will be generated!"),console.log("ðŸ“… Calendar integration available (webhook disabled for now)")},[]),(0,t.useEffect)(()=>{if(!H)return;let e=[...H.recommendations];e.sort((e,s)=>{switch(et){case"rank":default:return e.rank-s.rank;case"success_probability":return(s.success_prob||s.scores.success_probability||0)-(e.success_prob||e.scores.success_probability||0);case"stipend":let t="number"==typeof e.stipend?e.stipend:parseFloat(e.stipend)||0;return("number"==typeof s.stipend?s.stipend:parseFloat(s.stipend)||0)-t;case"title":return e.title.localeCompare(s.title)}}),$(e)},[H,"","all","all",et]);let ec=async()=>{if(Q){V(!0),K(null);try{k.MLService.clearCachedRecommendations(Q.student_id);let e=await k.MLService.getRecommendations(Q,15),s=e.recommendations.map(e=>{if(!e.application_deadline){let s=new Date("2025-12-01"),t=Math.floor(31*Math.random()),a=new Date(s);return a.setDate(s.getDate()+t),a.setHours(9+Math.floor(8*Math.random()),Math.floor(60*Math.random()),0,0),console.log("[Refresh] Generated missing deadline for ".concat(e.title,":"),a.toISOString()),{...e,application_deadline:a.toISOString()}}return e}),t={...e,recommendations:s};await k.MLService.storeRecommendations(Q.student_id,t),J(t),$(s)}catch(e){K(e instanceof Error?e.message:"Failed to refresh recommendations")}finally{V(!1)}}},ed=H?[...new Set(H.recommendations.map(e=>e.domain))]:[],em=H?[...new Set(H.recommendations.map(e=>e.location))]:[];(0,t.useEffect)(()=>{let e=e=>{let s=e.target;if("A"===s.tagName&&(s.download||s.href.startsWith("blob:")||s.href.startsWith("data:")))return e.preventDefault(),e.stopPropagation(),console.log("Prevented download:",s.href),alert("Downloads have been disabled on this page."),!1};return document.addEventListener("click",e,!0),()=>{document.removeEventListener("click",e,!0)}},[]);let eh="pmis-completed-courses:".concat(F);return((0,t.useEffect)(()=>{try{{let e=localStorage.getItem(eh);e&&en(JSON.parse(e))}}catch(e){}if(U&&ea){let e=U.list(),s={};e.forEach(e=>{s[e.internshipId]=!0}),ea(s)}},[eh,F,U]),W||"loading"===B)?(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,s.jsx)("div",{className:"max-w-6xl mx-auto px-4",children:(0,s.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-gov-saffron mx-auto mb-4",role:"status","aria-label":"Loading"}),(0,s.jsx)("h2",{className:"text-xl font-semibold text-gov-navy mb-2",children:"Getting AI Recommendations"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Our AI is analyzing your profile to find the perfect internship matches..."}),(0,s.jsx)("div",{className:"mt-4 max-w-md mx-auto bg-gray-200 rounded-full h-2",children:(0,s.jsx)("div",{className:"bg-gov-saffron h-2 rounded-full animate-pulse",style:{width:"60%"}})}),(0,s.jsx)("div",{className:"mt-6",children:(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Fetching personalized recommendations from AI model..."})})]})})})}):Y||"unauthenticated"===B?(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,s.jsxs)("div",{className:"max-w-6xl mx-auto px-4",children:[(0,s.jsxs)(C.Alert,{variant:"destructive",className:"mb-6",children:[(0,s.jsx)(g.AlertCircle,{className:"h-4 w-4"}),(0,s.jsx)(C.AlertDescription,{children:Y||"Authentication required. Please log in to view recommendations."})]}),(0,s.jsx)("div",{className:"text-center",children:(0,s.jsxs)("button",{onClick:()=>O.push("/login"),className:"bg-gov-saffron hover:bg-gov-saffron/90 text-white inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium h-10 px-4 py-2",children:[(0,s.jsx)(v.ArrowLeft,{className:"w-4 h-4 mr-2"}),(0,s.jsx)("span",{children:"Go to Login"})]})})]})}):eo?(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50 py-8",children:[(0,s.jsxs)("div",{className:"max-w-6xl mx-auto px-4",children:[(0,s.jsxs)(a.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h1",{className:"text-3xl font-bold text-gov-navy mb-2 flex items-center gap-2",children:[(0,s.jsx)(u,{className:"w-8 h-8 text-gov-saffron"}),"AI-Powered Recommendations"]}),(0,s.jsxs)("p",{className:"text-gray-600",children:["Personalized internship recommendations for ",null==Q?void 0:Q.name]})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)("button",{onClick:ec,className:"border border-gov-navy text-gov-navy hover:bg-gov-navy hover:text-white shadow-sm hover:shadow-md transition-all duration-200 inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium h-10 px-4 py-2",children:[(0,s.jsx)(x.RefreshCw,{className:"w-4 h-4 mr-2"}),(0,s.jsx)("span",{children:"Refresh"})]}),(0,s.jsx)(M.default,{href:"/internship",children:(0,s.jsxs)("button",{className:"border border-gov-navy text-gov-navy hover:bg-gov-navy hover:text-white shadow-sm hover:shadow-md transition-all duration-200 inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium h-10 px-4 py-2",children:[(0,s.jsx)(v.ArrowLeft,{className:"w-4 h-4 mr-2"}),(0,s.jsx)("span",{children:"Back to Form"})]})})]})]}),H&&(0,s.jsxs)("div",{className:"space-y-6 mb-8",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,s.jsx)(r.Card,{className:"border-gov-saffron/20 shadow-md",children:(0,s.jsxs)(r.CardContent,{className:"p-4 text-center",children:[(0,s.jsx)("div",{className:"text-3xl font-bold text-gov-saffron mb-1",children:H.total_recommendations}),(0,s.jsx)("div",{className:"text-sm text-gray-600",children:"Total Matches"}),(0,s.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"Personalized for you"})]})}),(0,s.jsx)(r.Card,{className:"border-green-200 shadow-md",children:(0,s.jsxs)(r.CardContent,{className:"p-4 text-center",children:[(0,s.jsxs)("div",{className:"text-3xl font-bold text-green-600 mb-1",children:[H.recommendations.length>0?Math.round(100*Math.max(...H.recommendations.map(e=>e.success_prob||e.scores.success_probability||0))):0,"%"]}),(0,s.jsx)("div",{className:"text-sm text-gray-600",children:"Highest Success Rate"}),(0,s.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"Best match probability"})]})}),(0,s.jsx)(r.Card,{className:"border-blue-200 shadow-md",children:(0,s.jsxs)(r.CardContent,{className:"p-4 text-center",children:[(0,s.jsx)("div",{className:"text-3xl font-bold text-blue-600 mb-1",children:ed.length}),(0,s.jsx)("div",{className:"text-sm text-gray-600",children:"Domains"}),(0,s.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"Career paths"})]})}),(0,s.jsx)(r.Card,{className:"border-purple-200 shadow-md",children:(0,s.jsxs)(r.CardContent,{className:"p-4 text-center",children:[(0,s.jsx)("div",{className:"text-3xl font-bold text-purple-600 mb-1",children:em.length}),(0,s.jsx)("div",{className:"text-sm text-gray-600",children:"Locations"}),(0,s.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"Cities available"})]})})]}),(0,s.jsxs)(r.Card,{className:"bg-gradient-to-r from-indigo-50 to-purple-50 border-indigo-200",children:[(0,s.jsx)(r.CardHeader,{children:(0,s.jsxs)(r.CardTitle,{className:"flex items-center gap-2 text-indigo-800",children:[(0,s.jsx)(u,{className:"w-5 h-5"}),"AI Analysis Summary"]})}),(0,s.jsxs)(r.CardContent,{children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsxs)("div",{className:"text-2xl font-bold text-indigo-600 mb-1",children:[H.recommendations.length>0&&((null==(c=H.recommendations[0])?void 0:c.success_prob)||(null==(A=H.recommendations[0])?void 0:A.scores.success_probability))?Math.round(100*(H.recommendations[0].success_prob||H.recommendations[0].scores.success_probability||0)):0,"%"]}),(0,s.jsx)("div",{className:"text-sm text-indigo-700 font-medium",children:"Top Match Success Rate"}),(0,s.jsx)("div",{className:"text-xs text-indigo-600 mt-1",children:(null==(I=H.recommendations[0])?void 0:I.title)||"Best recommendation"})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-green-600 mb-1",children:(null==Q?void 0:Q.skills.length)||8}),(0,s.jsx)("div",{className:"text-sm text-green-700 font-medium",children:"Skills Matched"}),(0,s.jsx)("div",{className:"text-xs text-green-600 mt-1",children:"Strong technical profile"})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-orange-600 mb-1",children:H.recommendations.reduce((e,s)=>{var t;return e+((null==(t=s.missing_skills)?void 0:t.length)||0)},0)}),(0,s.jsx)("div",{className:"text-sm text-orange-700 font-medium",children:"Skills to Develop"}),(0,s.jsx)("div",{className:"text-xs text-orange-600 mt-1",children:"Courses recommended"})]})]}),(0,s.jsxs)("div",{className:"mt-4 p-3 bg-white rounded-lg border border-indigo-100",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-indigo-800 mb-2",children:"ðŸ’¡ Quick Insights:"}),(0,s.jsxs)("ul",{className:"text-sm text-indigo-700 space-y-1",children:[(0,s.jsxs)("li",{children:["â€¢ Your ",(null==Q?void 0:Q.stream)||"technical"," background aligns well with ",ed.length," top companies"]}),(0,s.jsxs)("li",{children:["â€¢ Consider applying to ",em.slice(0,2).join(" and ")," for better opportunities"]}),(0,s.jsx)("li",{children:"â€¢ Strengthen your profile with the recommended courses for higher success rates"})]})]})]})]})]})]}),(0,s.jsx)(a.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"space-y-4",children:Z.filter(e=>e&&e.internship_id).length>0?Z.filter(e=>e&&e.internship_id).map((e,t)=>(0,s.jsx)(a.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*t},className:"group",children:(0,s.jsxs)(r.Card,{className:"relative border border-gray-200 shadow-sm hover:shadow-md transition-all duration-300 bg-white cursor-pointer",onClick:()=>er(e),children:[(0,s.jsx)("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gov-saffron"}),(0,s.jsx)(r.CardContent,{className:"p-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 flex-1",children:[(0,s.jsx)("div",{className:"w-12 h-12 rounded-lg overflow-hidden border border-gray-200 shadow-sm bg-white flex-shrink-0",children:(0,s.jsx)(i.default,{src:E(e.organization_name),alt:"".concat(e.organization_name," logo"),width:48,height:48,className:"w-full h-full object-cover",unoptimized:!0,onError:s=>{s.target.src="https://ui-avatars.com/api/?name=".concat(encodeURIComponent(e.organization_name),"&background=f8fafc&color=475569&size=48")}})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-1",children:[(0,s.jsxs)(o.Badge,{className:"bg-gov-saffron text-white border-0 px-2 py-1 text-xs font-medium",children:["#",e.rank]}),(0,s.jsx)(o.Badge,{variant:"outline",className:"border-gray-300 text-gray-700 px-2 py-1 text-xs",children:e.domain})]}),(0,s.jsx)("h3",{className:"font-semibold text-gray-900 mb-1 truncate",children:e.title}),(0,s.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(m.Building2,{className:"w-3 h-3"}),e.organization_name]}),(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(l.MapPin,{className:"w-3 h-3"}),e.location]}),(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(d,{className:"w-3 h-3"}),"â‚¹",e.stipend.toLocaleString()]})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:[Math.round(100*(e.success_prob||e.scores.success_probability||0)),"%"]}),(0,s.jsx)("div",{className:"text-xs text-gray-500",children:"Success Rate"})]}),(0,s.jsx)("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-gray-100 group-hover:bg-gray-200 transition-colors",children:(0,s.jsx)(h,{className:"w-4 h-4 text-gray-600"})})]})]})})]})},"".concat(e.internship_id,"-").concat(t))):(0,s.jsx)(a.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center py-12",children:(0,s.jsxs)("div",{className:"max-w-md mx-auto",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)(w,{className:"w-8 h-8 text-gray-400"})}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Recommendations Found"}),(0,s.jsx)("p",{className:"text-gray-600 mb-4",children:"The ML model couldn't find any matching internships for your profile. This might be due to:"}),(0,s.jsxs)("ul",{className:"text-sm text-gray-500 text-left space-y-1 mb-6",children:[(0,s.jsx)("li",{children:"â€¢ Limited internship data in the system"}),(0,s.jsx)("li",{children:"â€¢ Very specific profile requirements"}),(0,s.jsx)("li",{children:"â€¢ Temporary model issues"})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("button",{onClick:()=>window.location.reload(),className:"w-full bg-gov-navy text-white hover:bg-gov-blue shadow-sm hover:shadow-md transition-all duration-200 inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium h-10 px-4 py-2",children:[(0,s.jsx)(x.RefreshCw,{className:"w-4 h-4 mr-2"}),(0,s.jsx)("span",{children:"Refresh Recommendations"})]}),(0,s.jsx)("button",{onClick:()=>window.history.back(),className:"w-full border border-gov-navy text-gov-navy hover:bg-gov-navy hover:text-white shadow-sm hover:shadow-md transition-all duration-200 inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium h-10 px-4 py-2",children:(0,s.jsx)("span",{children:"â† Back to Form"})})]})]})})})]}),(0,s.jsx)(n.AnimatePresence,{children:ei&&(0,s.jsx)(a.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",onClick:()=>er(null),children:(0,s.jsxs)(a.motion.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",duration:.3},className:"bg-white rounded-lg shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden",onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 bg-gray-50",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"w-12 h-12 rounded-lg overflow-hidden border border-gray-200 shadow-sm bg-white",children:(0,s.jsx)(i.default,{src:E(ei.organization_name),alt:"".concat(ei.organization_name," logo"),width:48,height:48,className:"w-full h-full object-cover",unoptimized:!0,onError:e=>{e.target.src="https://ui-avatars.com/api/?name=".concat(encodeURIComponent(ei.organization_name),"&background=f8fafc&color=475569&size=48")}})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:ei.title}),(0,s.jsx)("p",{className:"text-gray-600",children:ei.organization_name})]})]}),(0,s.jsx)("button",{onClick:()=>er(null),className:"text-gray-500 hover:text-gray-700 hover:bg-gray-100 h-9 rounded-md px-3 inline-flex items-center justify-center whitespace-nowrap text-sm font-medium",children:(0,s.jsx)(j.X,{className:"w-5 h-5"})})]}),(0,s.jsxs)("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)]",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-8",children:[(0,s.jsxs)("div",{className:"flex items-start gap-6 flex-1",children:[(0,s.jsx)("div",{className:"w-16 h-16 rounded-lg overflow-hidden border border-gray-200 shadow-sm bg-white",children:(0,s.jsx)(i.default,{src:E(ei.organization_name),alt:"".concat(ei.organization_name," logo"),width:64,height:64,className:"w-full h-full object-cover",unoptimized:!0,onError:e=>{e.target.src="https://ui-avatars.com/api/?name=".concat(encodeURIComponent(ei.organization_name),"&background=f8fafc&color=475569&size=64")}})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,s.jsxs)(o.Badge,{className:"bg-gov-saffron text-white border-0 px-3 py-1 text-sm font-medium",children:["Rank #",ei.rank]}),(0,s.jsx)(o.Badge,{variant:"outline",className:"border-gray-300 text-gray-700 px-3 py-1 text-xs",children:ei.domain})]}),(0,s.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:ei.title}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-gray-600 mb-4",children:[(0,s.jsx)(m.Building2,{className:"w-4 h-4 text-gray-500"}),(0,s.jsx)("span",{className:"font-medium",children:ei.organization_name})]}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-sm text-gray-600",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(l.MapPin,{className:"w-4 h-4 text-gray-500"}),(0,s.jsx)("span",{children:ei.location})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(N.Clock,{className:"w-4 h-4 text-gray-500"}),(0,s.jsx)("span",{children:ei.duration})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(d,{className:"w-4 h-4 text-gray-500"}),(0,s.jsxs)("span",{children:["â‚¹",ei.stipend.toLocaleString()]})]})]})]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("div",{className:"text-3xl font-bold text-green-600 mb-1",children:[Math.round(100*(ei.success_prob||ei.scores.success_probability||0)),"%"]}),(0,s.jsx)("div",{className:"text-sm text-gray-600 mb-2",children:"Success Rate"}),(0,s.jsx)("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:(0,s.jsx)("div",{className:"bg-green-500 h-2 rounded-full transition-all duration-1000",style:{width:"".concat(100*(ei.success_prob||ei.scores.success_probability||0),"%")}})}),(0,s.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:(ei.success_prob||ei.scores.success_probability||0)>.8?"Excellent Match":(ei.success_prob||ei.scores.success_probability||0)>.6?"Good Match":(ei.success_prob||ei.scores.success_probability||0)>.4?"Fair Match":"Needs Improvement"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,s.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[Q&&(0,s.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6 border border-gray-200",children:[(0,s.jsxs)("h4",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[(0,s.jsx)(f.Target,{className:"w-5 h-5 text-blue-600"}),"Skills Analysis"]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm font-medium text-gray-700 mb-3",children:"Your Skills"}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2",children:[Q.skills.slice(0,6).map((e,t)=>(0,s.jsx)(o.Badge,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200 text-xs",children:e},t)),Q.skills.length>6&&(0,s.jsxs)(o.Badge,{variant:"outline",className:"text-gray-500 text-xs",children:["+",Q.skills.length-6," more"]})]})]}),ei.missing_skills&&ei.missing_skills.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm font-medium text-gray-700 mb-3",children:"Skills to Develop"}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2",children:[ei.missing_skills.slice(0,4).map((e,t)=>(0,s.jsx)(o.Badge,{variant:"outline",className:"bg-orange-50 text-orange-700 border-orange-200 text-xs",children:e},t)),ei.missing_skills.length>4&&(0,s.jsxs)(o.Badge,{variant:"outline",className:"text-gray-500 text-xs",children:["+",ei.missing_skills.length-4," more"]})]})]})]})]}),console.log("[RecommendationsPage] ML Model Course Data:",{internshipTitle:ei.title,organization:ei.organization_name,hasCourseSuggestions:!!ei.course_suggestions,courseSuggestionsLength:(null==(P=ei.course_suggestions)?void 0:P.length)||0,rawCourseSuggestions:ei.course_suggestions,hasCourses:!!ei.courses,coursesLength:(null==(q=ei.courses)?void 0:q.length)||0,rawCourses:ei.courses,missingSkills:ei.missing_skills,allRecommendationData:ei}),(0,s.jsxs)("div",{className:"bg-blue-50 rounded-lg p-6 border border-blue-200",children:[(0,s.jsxs)("h4",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[(0,s.jsx)(y.BookOpen,{className:"w-5 h-5 text-blue-600"}),"Recommended Courses"]}),(()=>{let e=ei.course_suggestions||ei.courses||[];if(0===e.length&&ei.missing_skills&&ei.missing_skills.length>0){let e=ei.missing_skills.slice(0,2).map((e,s)=>({course_name:"".concat(e," Fundamentals Course"),platform:"Coursera",skill:e,link:D("Coursera","".concat(e," course"))}));return console.log("[RecommendationsPage] Generated courses from missing skills:",e),(0,s.jsx)("div",{className:"space-y-3",children:e.map((e,t)=>(0,s.jsx)("div",{className:"bg-white p-4 rounded-lg border border-blue-100 hover:border-blue-200 transition-colors",children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h5",{className:"font-medium text-gray-900 mb-1",children:e.course_name}),(0,s.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-600 mb-2",children:[(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(m.Building2,{className:"w-3 h-3"}),e.platform]}),(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(N.Clock,{className:"w-3 h-3"}),z(e.platform)]})]}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:L(e.skill)})]}),(0,s.jsx)("button",{className:"ml-4 text-xs h-9 rounded-md px-3 border border-gov-navy text-gov-navy hover:bg-gov-navy hover:text-white shadow-sm hover:shadow-md transition-all duration-200 inline-flex items-center justify-center whitespace-nowrap font-medium",onClick:()=>{window.open(e.link,"_blank")},children:(0,s.jsxs)("span",{className:"inline-flex items-center gap-1",children:["Enroll",(0,s.jsx)(h,{className:"w-3 h-3"})]})})]})},t))})}return e.length>0?(0,s.jsx)("div",{className:"space-y-3",children:e.slice(0,2).map((e,t)=>(0,s.jsx)("div",{className:"bg-white p-4 rounded-lg border border-blue-100 hover:border-blue-200 transition-colors",children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h5",{className:"font-medium text-gray-900 mb-1",children:e.course_name||e.name}),(0,s.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-600 mb-2",children:[(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(m.Building2,{className:"w-3 h-3"}),e.platform]}),(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(N.Clock,{className:"w-3 h-3"}),z(e.platform)]})]}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:L(e.skill)})]}),(0,s.jsx)("button",{className:"ml-4 text-xs h-9 rounded-md px-3 border border-gov-navy text-gov-navy hover:bg-gov-navy hover:text-white shadow-sm hover:shadow-md transition-all duration-200 inline-flex items-center justify-center whitespace-nowrap font-medium",onClick:()=>{window.open(D(e.platform,e.course_name||e.name),"_blank")},children:(0,s.jsxs)("span",{className:"inline-flex items-center gap-1",children:["Enroll",(0,s.jsx)(h,{className:"w-3 h-3"})]})})]})},t))}):(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)(y.BookOpen,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-500 mb-2",children:"No course recommendations available"}),(0,s.jsx)("p",{className:"text-sm text-gray-400",children:"The ML model did not provide course suggestions for this internship."}),(0,s.jsx)("p",{className:"text-xs text-gray-400 mt-2",children:"Check browser console for ML model data details."})]})})()]})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(ei.reasons||ei.explain_reasons)&&(ei.reasons||ei.explain_reasons).length>0&&(0,s.jsxs)("div",{className:"bg-green-50 rounded-lg p-6 border border-green-200",children:[(0,s.jsxs)("h4",{className:"font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[(0,s.jsx)(b,{className:"w-5 h-5 text-green-600"}),"Why This Matches You"]}),(0,s.jsx)("ul",{className:"space-y-2 text-sm text-gray-700",children:(ei.reasons||ei.explain_reasons).slice(0,3).map((e,t)=>(0,s.jsxs)("li",{className:"flex items-start gap-2",children:[(0,s.jsx)(p.CheckCircle,{className:"w-4 h-4 text-green-500 mt-0.5 flex-shrink-0"}),(0,s.jsx)("span",{children:e})]},t))})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("button",{className:"w-full bg-gov-saffron hover:bg-gov-saffron/90 text-white h-12 text-base font-semibold inline-flex items-center justify-center rounded-md transition-all",onClick:()=>{var e;window.open((ei.internship_id,(e=ei.organization_name)?({google:"https://careers.google.com/students/",microsoft:"https://careers.microsoft.com/students/",amazon:"https://www.amazon.jobs/en/teams/internships-for-students",meta:"https://www.metacareers.com/students/",apple:"https://jobs.apple.com/en-us/search?team=internships-STDNT-INTRN",netflix:"https://jobs.netflix.com/search?q=intern",uber:"https://www.uber.com/careers/university/",airbnb:"https://careers.airbnb.com/university/"})[e.toLowerCase()]||"https://www.google.com/search?q=".concat(encodeURIComponent(e+" internship application")):"#"),"_blank")},"aria-label":"Apply Now",children:(0,s.jsxs)("span",{className:"inline-flex items-center gap-2",children:["Apply Now",(0,s.jsx)(h,{className:"w-4 h-4"})]})}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{className:"flex-1 text-xs font-medium px-3 py-2 border border-gov-navy rounded-md text-gov-navy hover:bg-gov-navy hover:text-white transition-colors",onClick:()=>{var e;return e=ei.internship_id,void es(s=>s.includes(e)?s.filter(s=>s!==e):s.length>=2?[s[1],e]:[...s,e])},"aria-label":ee.includes(ei.internship_id)?"Remove":"Compare",children:(0,s.jsx)("span",{children:ee.includes(ei.internship_id)?"Remove":"Compare"})}),(0,s.jsx)("button",{className:"flex-1 text-xs font-medium px-3 py-2 border border-gov-navy rounded-md text-gov-navy hover:bg-gov-navy hover:text-white transition-colors",onClick:async()=>{try{navigator.share?await navigator.share({title:"".concat(ei.title," at ").concat(ei.organization_name),text:"Check out this internship opportunity: ".concat(ei.title),url:window.location.href}):(await navigator.clipboard.writeText(window.location.href),alert("Link copied to clipboard!"))}catch(e){if(e instanceof Error&&"AbortError"===e.name)return;try{await navigator.clipboard.writeText(window.location.href),alert("Link copied to clipboard!")}catch(e){console.warn("Failed to copy to clipboard:",e)}}},children:(0,s.jsx)("span",{children:"Share"})})]})]}),(0,s.jsxs)("div",{className:"bg-red-50 rounded-lg p-4 border border-red-200",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)(N.Clock,{className:"w-4 h-4 text-red-600"}),(0,s.jsx)("span",{className:"font-medium text-red-800",children:"Application Deadline"})]}),(0,s.jsx)("div",{className:"text-lg font-bold text-red-600 mb-2",children:(()=>{let e=ei.application_deadline;if(!e){let s=new Date("2025-12-01"),t=Math.floor(31*Math.random()),a=new Date(s);a.setDate(s.getDate()+t),a.setHours(9+Math.floor(8*Math.random()),Math.floor(60*Math.random()),0,0),e=a.toISOString(),console.log("[UI Fallback] Generated deadline for ".concat(ei.title,":"),e)}return new Date(e).toLocaleDateString()})()})]})]})]})]})]})})})]}):(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-gov-saffron mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Loading..."})]})})}}]);