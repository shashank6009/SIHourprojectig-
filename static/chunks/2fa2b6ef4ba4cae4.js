(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,773258,e=>{"use strict";async function t(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{method:a="GET",headers:r={},body:s}=t,d={method:a,headers:{"Content-Type":"application/json",...r}};s&&"GET"!==a&&(d.body=JSON.stringify(s));let l=await fetch(e,d);if(!l.ok)throw Error("HTTP ".concat(l.status,": ").concat(l.statusText));return l.json()}e.s(["http",()=>a]);let a={get:(e,a)=>t(e,{method:"GET",headers:a}),post:(e,a,r)=>t(e,{method:"POST",headers:r,body:a}),put:(e,a,r)=>t(e,{method:"PUT",headers:r,body:a}),delete:(e,a)=>t(e,{method:"DELETE",headers:a})}},913693,e=>{"use strict";e.s(["default",()=>d]);var t=e.i(247167),a=e.i(843476),r=e.i(271645),s=e.i(773258);function d(){let[e,d]=(0,r.useState)({}),[l,n]=(0,r.useState)([]),[o,i]=(0,r.useState)({consents:!1,vault:!1,dsr:!1}),[c,m]=(0,r.useState)({kind:"",data:""}),[u,x]=(0,r.useState)(null);(0,r.useEffect)(()=>{h(),g()},[]);let h=async()=>{i(e=>({...e,consents:!0}));try{d({LLM_PROCESSING:{granted:!1,version:"2025-09-28",region:"IN"},OUTREACH_EMAIL:{granted:!1,version:"2025-09-28",region:"IN"},CALENDAR_EVENTS:{granted:!1,version:"2025-09-28",region:"IN"},OFFSHORE_STORAGE:{granted:!1,version:"2025-09-28",region:"IN"},ANALYTICS:{granted:!1,version:"2025-09-28",region:"IN"}})}catch(e){console.error("Failed to load consents:",e)}finally{i(e=>({...e,consents:!1}))}},g=async()=>{i(e=>({...e,vault:!0}));try{n([{id:"1",kind:"contact",data:{email:"user@example.com",phone:"+1234567890"}},{id:"2",kind:"education_doc",data:{degree:"Bachelor of Science",university:"Example University"}}])}catch(e){console.error("Failed to load vault items:",e)}finally{i(e=>({...e,vault:!1}))}},p=async t=>{try{var a;let r=!(null==(a=e[t])?void 0:a.granted);console.log("Toggling consent for ".concat(t," to ").concat(r)),d(e=>({...e,[t]:{...e[t],granted:r}}))}catch(e){console.error("Failed to update consent:",e),alert("Failed to update consent")}},y=async()=>{if(!c.kind||!c.data)return void alert("Please fill in both kind and data fields");try{console.log("Adding PII data:",c);let e={id:Date.now().toString(),kind:c.kind,data:JSON.parse(c.data)};n(t=>[...t,e]),m({kind:"",data:""})}catch(e){console.error("Failed to add PII data:",e),alert("Failed to add PII data")}},b=async e=>{if(confirm("Are you sure you want to delete this item?"))try{console.log("Deleting vault item:",e),n(t=>t.filter(t=>t.id!==e))}catch(e){console.error("Failed to delete vault item:",e),alert("Failed to delete vault item")}},N=async()=>{i(e=>({...e,dsr:!0}));try{let e=await s.http.post("/api/dsr/export",{});e.data.success?(x({type:"export",status:"done",downloadUrl:e.data.downloadUrl}),alert("Data export completed! Check the download link below.")):alert("Export failed")}catch(e){console.error("Failed to export data:",e),alert("Failed to export data")}finally{i(e=>({...e,dsr:!1}))}},v=async()=>{if(confirm("Are you sure you want to delete ALL your data? This action cannot be undone.")&&confirm("This will permanently delete all your resumes, comments, batches, and personal data. Are you absolutely sure?")){i(e=>({...e,dsr:!0}));try{let e=await s.http.post("/api/dsr/delete",{confirm:!0});e.data.success?(x({type:"delete",status:"done",deletionSummary:e.data.deletionSummary}),alert("Data deletion completed!")):alert("Deletion failed")}catch(e){console.error("Failed to delete data:",e),alert("Failed to delete data")}finally{i(e=>({...e,dsr:!1}))}}};return(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 p-6",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Privacy Settings"}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Consent Management"}),(0,a.jsxs)("p",{className:"text-sm text-gray-600 mb-6",children:["Policy Version: ",t.default.env.NEXT_PUBLIC_POLICY_VERSION||"2025-09-28"," | Region: ",t.default.env.NEXT_PUBLIC_PRIVACY_DEFAULT_REGION||"IN"]}),(0,a.jsx)("div",{className:"space-y-4",children:Object.entries(e).map(e=>{let[t,r]=e;return(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium",children:t.replace(/_/g," ")}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Version: ",r.version," | Region: ",r.region]})]}),(0,a.jsx)("button",{onClick:()=>p(t),className:"px-4 py-2 rounded-md font-medium ".concat(r.granted?"bg-green-100 text-green-800 hover:bg-green-200":"bg-gray-100 text-gray-800 hover:bg-gray-200"),children:r.granted?"Granted":"Not Granted"})]},t)})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"PII Manager"}),(0,a.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[(0,a.jsx)("h3",{className:"font-medium mb-3",children:"Add Personal Information"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("input",{type:"text",placeholder:"Kind (e.g., contact, education_doc)",value:c.kind,onChange:e=>m(t=>({...t,kind:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,a.jsx)("textarea",{placeholder:'Data (JSON format, e.g., {"email": "user@example.com"})',value:c.data,onChange:e=>m(t=>({...t,data:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3}),(0,a.jsx)("button",{onClick:y,className:"bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700",children:"Add to Vault"})]})]}),(0,a.jsx)("div",{className:"space-y-3",children:l.map(e=>(0,a.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("h3",{className:"font-medium",children:e.kind}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>{var t;return t=JSON.stringify(e.data,null,2),void(navigator.clipboard.writeText(t),alert("Copied to clipboard!"))},className:"text-blue-600 hover:text-blue-800 text-sm",children:"Copy"}),(0,a.jsx)("button",{onClick:()=>b(e.id),className:"text-red-600 hover:text-red-800 text-sm",children:"Delete"})]})]}),(0,a.jsx)("pre",{className:"text-sm bg-gray-100 p-2 rounded overflow-x-auto",children:JSON.stringify(e.data,null,2)})]},e.id))})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Data Controls"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,a.jsx)("h3",{className:"font-medium mb-2",children:"Export My Data"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:"Download a complete copy of all your data including resumes, comments, and personal information."}),(0,a.jsx)("button",{onClick:N,disabled:o.dsr,className:"bg-green-600 text-white py-2 px-4 rounded-md hover:bg-green-700 disabled:opacity-50",children:o.dsr?"Exporting...":"Export My Data"}),(null==u?void 0:u.type)==="export"&&"done"===u.status&&(0,a.jsxs)("div",{className:"mt-3 p-3 bg-green-50 rounded-md",children:[(0,a.jsx)("p",{className:"text-sm text-green-800",children:"Export completed!"}),(0,a.jsx)("a",{href:u.downloadUrl,className:"text-sm text-green-600 hover:underline",target:"_blank",rel:"noopener noreferrer",children:"Download your data"})]})]}),(0,a.jsxs)("div",{className:"p-4 border border-red-200 rounded-lg bg-red-50",children:[(0,a.jsx)("h3",{className:"font-medium mb-2 text-red-800",children:"Delete My Data"}),(0,a.jsxs)("p",{className:"text-sm text-red-600 mb-3",children:[(0,a.jsx)("strong",{children:"Warning:"})," This will permanently delete all your data. This action cannot be undone."]}),(0,a.jsx)("button",{onClick:v,disabled:o.dsr,className:"bg-red-600 text-white py-2 px-4 rounded-md hover:bg-red-700 disabled:opacity-50",children:o.dsr?"Deleting...":"Delete All My Data"}),(null==u?void 0:u.type)==="delete"&&"done"===u.status&&(0,a.jsxs)("div",{className:"mt-3 p-3 bg-red-100 rounded-md",children:[(0,a.jsx)("p",{className:"text-sm text-red-800",children:"Data deletion completed!"}),(0,a.jsxs)("p",{className:"text-xs text-red-600",children:["Deleted: ",Object.entries(u.deletionSummary||{}).map(e=>{let[t,a]=e;return"".concat(t,": ").concat(a)}).join(", ")]})]})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Privacy Policy"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Current Policy Version: ",(0,a.jsx)("strong",{children:t.default.env.NEXT_PUBLIC_POLICY_VERSION||"2025-09-28"})]}),(0,a.jsx)("a",{href:"/policy/".concat(t.default.env.NEXT_PUBLIC_POLICY_VERSION||"2025-09-28"),className:"text-blue-600 hover:underline text-sm",target:"_blank",rel:"noopener noreferrer",children:"View Privacy Policy"})]})]})]})})}}]);